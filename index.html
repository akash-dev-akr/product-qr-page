<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Pro Scanner</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            background: #000;
            font-family: sans-serif;
            overflow: hidden;
        }

        /* 1. The Camera Container (Full Screen) */
        #reader {
            width: 100vw !important;
            height: 100vh !important;
            border: none !important;
        }

        /* 2. The Transparent Overlay Layer */
        .scanner-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none; /* Allows clicking through to camera controls if needed */
        }

        /* 3. The Scanning Frame (The Green Corners) */
        .scan-box {
            width: 260px;
            height: 260px;
            position: relative;
            box-shadow: 0 0 0 5000px rgba(0, 0, 0, 0.5); /* Dim surroundings */
            border-radius: 20px;
        }

        /* Custom Green Corners */
        .corner {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 4px solid #00ff88;
            pointer-events: none;
        }
        .top-left { top: 0; left: 0; border-right: 0; border-bottom: 0; border-top-left-radius: 20px; }
        .top-right { top: 0; right: 0; border-left: 0; border-bottom: 0; border-top-right-radius: 20px; }
        .bottom-left { bottom: 0; left: 0; border-right: 0; border-top: 0; border-bottom-left-radius: 20px; }
        .bottom-right { bottom: 0; right: 0; border-left: 0; border-top: 0; border-bottom-right-radius: 20px; }

        /* 4. The Moving Laser Line */
        .laser {
            position: absolute;
            width: 100%;
            height: 2px;
            background: #00ff88;
            box-shadow: 0 0 15px #00ff88;
            top: 0;
            animation: scanMove 2s infinite ease-in-out;
        }

        @keyframes scanMove {
            0% { top: 5%; }
            50% { top: 95%; }
            100% { top: 5%; }
        }

        /* 5. Text & Icons */
        .scan-label {
            margin-top: 40px;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 14px;
            opacity: 0.8;
        }

        .torch-btn {
            position: absolute;
            top: 10%;
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 50%;
            pointer-events: auto;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div id="reader"></div>

    <div class="scanner-overlay">
        <div class="torch-btn">ðŸ”¦</div>
        
        <div class="scan-box">
            <div class="laser"></div>
            <div class="corner top-left"></div>
            <div class="corner top-right"></div>
            <div class="corner bottom-left"></div>
            <div class="corner bottom-right"></div>
        </div>

        <div class="scan-label">Scanning for codes...</div>
    </div>

    <script>
        const html5QrCode = new Html5Qrcode("reader");
        
        const config = { 
            fps: 15, 
            qrbox: { width: 250, height: 250 },
            aspectRatio: 1.0 
        };

        // Start Scanner
        html5QrCode.start(
            { facingMode: "environment" }, 
            config,
            (decodedText) => {
                alert("Scanned: " + decodedText);
                // logic for what happens after scan goes here
            }
        ).catch(err => console.error("Camera error:", err));
    </script>
</body>
</html>
